# Demo dApp (wallet + on-chain verify)

The docs site has a browser-only live demo that can validate a manifest and build `instruction_data`.

If you want the full end-to-end flow (connect a wallet and submit a real devnet verify transaction), use the in-repo demo dApp.

## Start the demo dApp

From the repo root:

```bash
pnpm demo:start
```

Open:

- http://localhost:3001

## Inputs

You need three files from an artifact directory:

- `artifacts/<artifact_name>/local/noirforge.json`
- `artifacts/<artifact_name>/local/<name>.proof`
- `artifacts/<artifact_name>/local/<name>.pw`

Tip: The canonical proof and witness file names are recorded in `noirforge.json` under `outputs_rel.proof` and `outputs_rel.public_witness`.

The demo dApp also needs a verifier **Program ID**.

- If the manifest includes on-chain outputs (e.g. `outputs.deployed_program_id` or `outputs.verify_onchain_program_id`), the demo dApp will detect it automatically.
- If the manifest was generated by local-only QA (build/prove/verify-local), it will not include a Program ID. In that case:
  - Deploy the verifier on devnet:

```bash
pnpm noirforge deploy --artifact-name <artifact_name> --cluster devnet
pnpm noirforge verify-onchain --artifact-name <artifact_name> --cluster devnet --payer ~/.config/solana/id.json
```

  - Or paste a Program ID into the “Program ID override” field.

Example (proof-gated SPL transfer):

- Artifacts:
  - `artifacts/private_transfer_auth_from_template/local/noirforge.json`
  - `artifacts/private_transfer_auth_from_template/local/private_transfer_authorization.proof`
  - `artifacts/private_transfer_auth_from_template/local/private_transfer_authorization.pw`
- Program ID (devnet): `2DbKgTxPqF2pk835bqetK7RqcAudUhbTcPE7wVWuMprr`
- Example verify+transfer tx (devnet): https://explorer.solana.com/tx/2bhiT1WVM66PYixGbhAaeoV5qKaVeswQQbuWDm12sJXnr7FuoerXm4x7JzmJJ8KtXrGMwDwPb6yTtYpDjuQGyhry?cluster=devnet

## Verify + Transfer (SPL)

The demo dApp can submit a single transaction that:

- verifies the proof on-chain
- then performs an SPL token `transferChecked`

Notes:

- If you load a `private_transfer_authorization` manifest, the demo dApp will derive the transfer parameters from the uploaded `.pw`:
  - `sender`, `recipient`, `mint` (Solana pubkeys)
  - `amount` (base units)
- In that mode, the mint/recipient/amount inputs are auto-filled and locked, and the demo dApp will reject the transaction unless the derived `sender` matches the connected wallet.
- For other templates/manifests, the mint/recipient/amount inputs remain manual.
- If the recipient does not yet have an associated token account (ATA) for the mint, the transaction will create it first.

## Wallet network

If your RPC URL is devnet but your wallet is set to mainnet, the wallet popup may show a failed simulation even though the devnet transaction succeeds.

Even on devnet, some wallets may show a false-negative “simulation failed” if their simulation RPC does not match the dApp RPC or is lagging. If the transaction is confirmed successfully on devnet, the simulation warning can be ignored.

Set your wallet network to match the dApp RPC (devnet recommended).

## See also

- [Live demo](/docs/getting-started/live-demo)
- [Devnet demo (hackathon gate)](/docs/getting-started/devnet-demo)
- [Instruction encoding](/docs/concepts/instruction-encoding)
